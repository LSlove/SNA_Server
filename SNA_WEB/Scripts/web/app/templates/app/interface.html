{% extends "app/base_site.html" %}

{% block title %} Morris JS {% endblock title %}

{% block stylesheets %}
{{ block.super }}
{% endblock stylesheets %}

{% block content %}

<div class="right_col" role="main">
  <div class="row">
    <!-- /graph area -->
    <div class="col-md-12 col-sm-12 col-xs-12">
      <div class="x_panel">
        <div class="x_title">
          <h2>인터페이스 검색</h2>
          <ul class="nav navbar-right panel_toolbox">
          </ul>
          <div class="clearfix"></div>
        </div>
        <div class="x_content">

          <form class="form-horizontal form-label-left">

            <div class="form-group">
              <label class="col-sm-1 control-label">인터페이스 명</label>
              <div class="col-sm-3">
                <input type="text" class="form-control" style="width: 158px">
              </div>
              <label class="col-sm-1 control-label">인터페이스 IP</label>
              <div class="col-sm-3">
                <input type="text" class="form-control" style="width: 158px">
              </div>

              <div class="form-group">
              </div>
              <label class="col-sm-1 control-label">운영 상태</label>
              <div class="col-sm-3">
                <div class="btn-group">
                  <select class="form-control" style="width: 158px">
                    <option>ON / OFF</option>
                    <option>ON</option>
                    <option>OFF</option>
                  </select>
                </div>
              </div>
              <label class="col-sm-1 control-label">동작 상태</label>
              <div class="col-sm-3">
                <div class="btn-group">
                  <select class="form-control" style="width: 158px">
                    <option>ON / OFF</option>
                    <option>ON</option>
                    <option>OFF</option>
                  </select>
                </div>
              </div>
            </div>
            <label class="col-sm-1 control-label">대역폭</label>
            <div class="col-sm-3">
              <input type="text" class="form-control" style="width: 158px">
            </div>
            <!-- <div class="col-md-12 col-md-offset-12"> -->
            <button type="submit" class="btn btn-default middle" style="float: right;">검색</button>
            <!-- </div> -->
          </form>
        </div>
      </div>

    </div>

    <div class="col-md-12 col-sm-12 col-xs-12">
      <div class="x_panel">
        <div class="x_title">
          <h2>Interface 리스트</h2>
          <ul class="nav navbar-right panel_toolbox">
            <div class="form-group">
              <div class="container text-right">
                {% comment %} <a href="/user_register"> <button type="submit" class="btn btn-default">등록</button></a>
                <a href="/auth_user/user_change/" class="btn btn-default" id="modify">수정</a>
                <a href="/auth_user/user_delete/" class="btn btn-default" id="delete">삭제</a> {% endcomment %}
              </div>
          </ul>
          <div class="clearfix"></div>
        </div>
        <div id="grid"></div>
        <script>
          const grid = new tui.Grid({
            el: document.getElementById('grid'),
            bodyHeight: 500,
            scrollX: false,
            scrollY: false,
            minBodyHeight: 30,
            pageOptions: {
              useClient: true,
              perPage: 12
            },
            columns: [
              {
                header: '장비주소',
                name: 'eq_ip',
                filter: {
                  type: 'text',
                  operator: 'OR'
                },
                width: 230,
              },

              {
                header: 'IF_NAME',
                name: 'name',
                filter: 'select'
              },
              {
                header: 'IF_ALIAS',
                name: 'alias',
                filter: {
                  type: 'text',
                  operator: 'OR'
                }
              },
              {
                header: 'IF_INDEX',
                name: 'if_index',
                filter: {
                  type: 'text',
                  operator: 'OR'
                },
                width: 100,
              },
              {
                header: 'IF_DESCR',
                name: 'desc',
                filter: {
                  type: 'text',
                  operator: 'OR'
                }
              },
              {
                header: 'IF_IP',
                name: 'if_ip',
                filter: {
                  type: 'text',
                  operator: 'OR'
                }
              },
              {
                header: '대역폭',
                name: 'speed',
                filter: 'select'
              },
              {
                header: 'Mac Address',
                name: 'mac_addr',
                width: 200,
              },
              {
                header: '동작상태',
                name: 'oper_status',
                filter: 'select',

              },
              {
                header: '설정상태',
                name: 'admin_status',
              },
            ]
          });

          {% for i in interface %} 
          var oper_status_v
            if ("{{i.oper_status}}" == 1) {
              document.write("ON")
              oper_status_v = "ON";
            } else if("{{i.oper_status}}" == 2)  {
              document.write("OFF")
              oper_status_v = "OFF";
            }
            {% endfor %}
            
          var InterfaceData = [
            {% for i in interface %} 
          {
            eq_ip: "{{i.eq_ip}}",
              if_index: "{{i.if_index}}",
                name: "{{i.name}}",
                  alias: "{{i.alias}}",
                    descr: "{{i.descr}}",
                      speed: "{{i.speed}}",
                        if_ip: "{{i.if_ip}}",
                          mac_addr: "{{i.mac_addr}}",
                            admin_status: "{{i.admin_status}}" == 1,

                            // {% if "{{i.oper_status}}" == "true" %}
                            //   oper_status: "ON"
                            // {% else %}
                            //   oper_status: "OFF"
                            // {% endif %}
                            oper_status: "{{i.oper_status}}" == 1       
          },
          {% endfor %}
          ];
          grid.resetData(InterfaceData);

        </script>
      </div>
    </div>
  </div>
</div>

</html>
{% endblock content %}

{% block javascripts %}
{{ block.super }}
<!-- morris.js -->
<script src="/static/vendors/raphael/raphael.min.js"></script>
<script src="/static/vendors/morris.js/morris.min.js"></script>
<script src="/static/vendors/Chart.js/dist/Chart.min.js"></script>
{% endblock javascripts %}