<!-- 장비관리 -->
{% extends "app/base_site.html" %}

{% block title %} Morris JS {% endblock title %}

{% block stylesheets %}
{{ block.super }}
{% endblock stylesheets %}

{% block content %}
<div class="right_col" role="main">
  <div class="row">
  <div class="col-md-12 col-sm-12 col-xs-12">
    <div class="x_panel">
      <div class="x_title">
        <h2>장비 검색</h2>
        <ul class="nav navbar-right panel_toolbox">
        </ul>
        <div class="clearfix"></div>
      </div>
      <div class="x_content">

        <form class="form-horizontal form-label-left">

          <div class="form-group">
            <label class="col-sm-1 control-label">장비 주소</label>
            <div class="col-sm-3">
              <input type="text" class="form-control" >
            </div>
            <label class="col-sm-1 control-label">장비 명</label>
            <div class="col-sm-3">
              <input type="text" class="form-control">
            </div>
            
            <div class="form-group">
            </div>
            <label class="col-sm-1 control-label">벤더 / 모델</label>
            <div class="col-sm-3">
              <div class="btn-group">
                <select class="form-control" style="width: 158px">
                  <option>벤더</option>
                  <option> </option>
                  <option> </option>
                  <option> </option>
                </select>
              </div>
              <div class="btn-group">
                <select class="form-control" style="width: 158px">
                  <option>모델</option>
                  <option> </option>
                  <option> </option>
                  <option> </option>
                </select>
              </div>
            </div>
            <label class="col-sm-1 control-label">장비 위치</label>
            <div class="col-sm-3">
              <input type="text" class="form-control">
            </div>
          </div>
          <label class="col-sm-1 control-label">담당 / 팀</label>
            <div class="col-sm-3">
              <div class="btn-group">
                <select class="form-control" style="width: 158px"> 
                  <option>담당</option>
                  <option> </option>
                  <option> </option>
                  <option> </option>
                </select>
              </div>
              <div class="btn-group">
                <select class="form-control" style="width: 158px">
                  <option>팀</option>
                  <option> </option>
                  <option> </option>
                  <option> </option>
                </select>
              </div>
            </div>
              <button type="submit" class="btn btn-default middle" style="float: right;">검색</button>
        </form>
      </div>
    </div>
</div>
  </div>

  <div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
      <div class="x_panel">
        <div class="x_title">

          <h2>장비 리스트</small></h2>

          <ul class="nav navbar-right panel_toolbox">
            <div class="form-group">
              <a href="/device_register"> <button type="submit" class="btn btn-default">등록</button></a>
              <a href="/equipment/device_change/" class="btn btn-default" id="modify">수정</a>
              <a href="/equipment/device_delete/" class="btn btn-default" id="delete">삭제</a>
            </div>
          </ul>

          <div class="clearfix"></div>
        </div>
        <div id="grid"></div>
        <script>
          const grid = new tui.Grid({
            el: document.getElementById('grid'),
            bodyHeight: 500,
            scrollX: false,
            scrollY: false,
            minBodyHeight: 30,
            rowHeaders: ['checkbox'],
            pageOptions: {
              perPage: 5
            },
            columns: [
              {
                header: '장비 주소',
                name: 'eq_ip',
                filter: {
                  type: 'text',
                  operator: 'OR'
                }
              },
              {
                header: '장비 이름',
                name: 'equip_name',
                filter: {
                  type: 'text',
                  operator: 'OR'
                }
              },
              {
                header: 'Vendor 명',
                name: 'vnd_name',
                filter: 'select'
              },
              {
                header: 'Model 명',
                name: 'mdl_name',
                filter: 'select'
              },
              // {
              //   header: '장비 벤더',
              //   name: 'vendor',
              //   filter: 'number'
              // },
              // {
              //   header: '장비 모델',
              //   name: 'model',
              //   filter: 'number'
              // },
              // {
              //   header: 'Vendor codetype',
              //   name: 'vnd_codetype',
              //   filter: 'number'
              // },
              // {
              //   header: 'Model codetype',
              //   name: 'mdl_codetype',
              //   filter: 'number'
              // },
              // {
              //   header: 'Code value',
              //   name: 'code_value',
              //   filter: 'number'
              // },
              {
                header: '장비 설명',
                name: 'descr',
                filter: {
                  type: 'text',
                  operator: 'OR'
                },
                width: 500,
              },
              {
                header: '장비 위치',
                name: 'location',
                filter: 'select',
                width: 200,
              },
              
              {
                header: '관리 담당',
                name: 'manage',
                filter: 'select',
                width: 150,
              },
              {
                header: '관리 팀',
                name: 'team',
                filter: 'select',
                width: 150,
              },
            ]
          });

          var equipData = [
          {% for e in equip_code %}
            {
            eq_ip: "{{e.eq_ip}}",
            vnd_name: "{{e.vnd_name}}",
            mdl_name: "{{e.mdl_name}}",
            descr: "{{e.descr}}",
            location: "{{e.location}}",
            manage: "{{e.manage}}",
            team: "{{e.team}}",
            equip_name:"{{e.equip_name}}",
            },
          {% endfor %}
          ];
          grid.resetData(equipData);

          grid.on('check', (ev) => {
            console.log(grid.getRow(ev.rowKey).eq_ip);
            selected_id = grid.getRow(ev.rowKey).eq_ip 
            console.log("selected_id : " , selected_id)
            var loc = "/equipment/device_change/" + grid.getRow(ev.rowKey).eq_ip; 
            document.getElementById("modify").href=loc;
            var loc = "/equipment/device_delete/" + grid.getRow(ev.rowKey).eq_ip; 
            document.getElementById("delete").href=loc;
          });  
        </script>
      </div>
    </div>
  </div>
</div>

</div>







{% endblock content %}

{% block javascripts %}
{{ block.super }}
<script src="/static/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="/static/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<script src="/static/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="/static/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
<script src="/static/vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>
<script src="/static/vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
<script src="/static/vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
<script src="/static/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
<script src="/static/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
<script src="/static/vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="/static/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
<script src="/static/vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>
<script src="/static/vendors/jszip/dist/jszip.min.js"></script>
<script src="/static/vendors/pdfmake/build/pdfmake.min.js"></script>
<script src="/static/vendors/pdfmake/build/vfs_fonts.js"></script>
{% endblock javascripts %}